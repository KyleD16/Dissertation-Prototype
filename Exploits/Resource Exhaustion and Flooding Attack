import asyncio
from bleak import BleakClient

TARGET_ADDRESS = "2C:BC:BB:4C:A0:EA"
LED_CHAR_UUID = "8d310055-60fe-4774-a5b7-e3744632da7f"

async def led_flood():
    try:
        async with BleakClient(TARGET_ADDRESS) as client:
            print("Connected, starting LED flood...")
            count = 0
            while True:
                await client.write_gatt_char(LED_CHAR_UUID, b"on", response=False)
                await client.write_gatt_char(LED_CHAR_UUID, b"off", response=False)
                count += 2
                if count % 100 == 0:
                    print(f"Sent {count} writes")
                # Minimal delay; adjust if needed
                await asyncio.sleep(0.001)
    except Exception as e:
        print("Error:", e)

asyncio.run(led_flood())

